(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{200:function(e,t,s){"use strict";s.r(t);var r=s(8),a=s(9),i=s(10),n=s.n(i),l=s(7),d=s(3),o=s(0),c=s(5),u=s(4),m={name:"Edit Tender",components:{VueEditor:r.a},data:function(){return{valid:!1,modal:!1,rules:l.a,loading:!1,alert:{message:"",type:"success",visible:!1},editorSettings:{modules:{imageDrop:!0,imageResize:{}}},customModulesForEditor:[{alias:"imageDrop",module:a.a},{alias:"imageResize",module:n.a}]}},watch:{$route:"clear"},methods:{clear:function(){this.$refs.form.reset(),this.loadData(),this.alert={message:"",type:"",visible:!1}},loadData:function(){o.a.dispatch("setSelectedTender",{id:c.a.currentRoute.params.id})},submit:function(){var e=this;console.log(this.selectedTender);var t=new FormData;Object.keys(this.selectedTender).forEach((function(s){t.append(s,e.selectedTender[s])})),t.append("_method","put");var s=this;s.loading=!0,d.b.post("tender/".concat(this.selectedTender.id),t).then((function(e){s.alert={message:"Successfully Updated Tender",type:"success",visible:!0},o.a.dispatch("setSelectedTender",{id:c.a.currentRoute.params.id}),o.a.dispatch("setTenders",{page:1,size:10,category:""})}),(function(e){Object(u.a)(e),500===e.response.status?s.alert={message:"Error: Something went wrong at the server",type:"error",visible:!0}:s.alert={message:"Please fix issues before submitting",type:"error",visible:!0}})).finally((function(){s.loading=!1}))}},created:function(){o.a.dispatch("setSelectedTender",{id:c.a.currentRoute.params.id}),o.a.dispatch("setTenderCategories")},mounted:function(){this.tender=o.a.getters.getSelectedTender},computed:{categories:function(){return o.a.getters.getTenderCategories},selectedTender:function(){return o.a.getters.getSelectedTender},tenderApplications:function(){return o.a.getters.getSelectedApplications},loadingPage:function(){return o.a.getters.getLoading}}},v=(s(241),s(2)),p=Object(v.a)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"px-5 py-3 shadow-lg"},[s("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.alert.visible||!1,expression:"alert.visible || false"}],attrs:{type:e.alert.type,dismissible:""}},[e._v("\n    "+e._s(e.alert.message)+"\n  ")]),e._v(" "),s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Edit Tender")])]),e._v(" "),s("v-fade-transition",{attrs:{"hide-on-leave":""}},[e.loadingPage?s("v-card-text",[s("v-skeleton-loader",{attrs:{type:"list-heading, list-item, list-item-three-line, list-item-three-line, list-item, actions"}})],1):s("v-card-text",[s("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-row",[s("v-col",{attrs:{cols:"10",md:"8  "}},[s("v-text-field",{attrs:{rules:e.rules.required||e.rules.min_20,label:"Title*",required:""},model:{value:e.selectedTender.title,callback:function(t){e.$set(e.selectedTender,"title",t)},expression:"selectedTender.title"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px","offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[s("v-text-field",e._g({attrs:{rules:e.rules.required,value:e.selectedTender.deadline?e.formatToDate(e.selectedTender.deadline):null,label:"Deadline*","prepend-icon":"mdi-calendar",readonly:""}},r))]}}])},[e._v(" "),s("v-date-picker",{attrs:{"no-title":""},model:{value:e.selectedTender.deadline,callback:function(t){e.$set(e.selectedTender,"deadline",t)},expression:"selectedTender.deadline"}})],1)],1),e._v(" "),e.selectedTender.file_url?s("v-col",{attrs:{cols:"2"}},[s("a",{staticClass:"btn btn-primary btn-sm text-white shadow-lg pr-4",attrs:{href:e.selectedTender.file_url,target:"_blank"}},[s("v-icon",{attrs:{color:"white",left:"",small:""}},[e._v("mdi-download")]),e._v("\n              File\n            ")],1)]):e._e(),e._v(" "),s("v-col",{attrs:{cols:"12"}},[s("vue-editor",{attrs:{customModules:e.customModulesForEditor,editorOptions:e.editorSettings,rules:e.rules.min_100},model:{value:e.selectedTender.description,callback:function(t){e.$set(e.selectedTender,"description",t)},expression:"selectedTender.description"}})],1),e._v(" "),s("v-col",{attrs:{cols:"4"}},[[s("v-file-input",{attrs:{label:"Upload Image","show-size":""},model:{value:e.selectedTender.image,callback:function(t){e.$set(e.selectedTender,"image",t)},expression:"selectedTender.image"}})]],2),e._v(" "),s("v-col",{attrs:{cols:"4"}},[[s("v-file-input",{attrs:{label:"Upload File","show-size":""},model:{value:e.selectedTender.file,callback:function(t){e.$set(e.selectedTender,"file",t)},expression:"selectedTender.file"}})]],2),e._v(" "),s("v-col",{staticClass:"mx-auto",attrs:{cols:"4"}},[s("v-select",{attrs:{items:e.categories,rules:e.rules.required,label:"Select category"},model:{value:e.selectedTender.category,callback:function(t){e.$set(e.selectedTender,"category",t)},expression:"selectedTender.category"}})],1)],1),e._v(" "),s("v-row",[e.selectedTender.image_url?s("v-col",{attrs:{cols:"12",md:"5"}},[s("v-img",{attrs:{src:e.selectedTender.image_url}})],1):e._e(),e._v(" "),s("v-col",{attrs:{md:e.selectedTender.image_url?7:12,cols:"12"}},[s("h3",{staticClass:"primary--text mx-3 mb-5",domProps:{textContent:e._s("Submitted Applications")}}),e._v(" "),s("v-fade-transition",{attrs:{"hide-on-leave":""}},[e.loading?s("v-skeleton-loader",{attrs:{type:"table"}}):e.tenderApplications&&0!==e.tenderApplications.length?s("v-simple-table",{attrs:{"fixed-header":"",height:"300px"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",[e._v("Name")]),e._v(" "),s("th",[e._v("Email")]),e._v(" "),s("th",[e._v("Date")]),e._v(" "),s("th",{staticClass:"text-center"},[e._v("File")])])]),e._v(" "),s("tbody",e._l(e.tenderApplications,(function(t){return s("tr",{key:t.name},[s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.email))]),e._v(" "),s("td",[e._v(e._s(e.formatToDate(t.created_at)))]),e._v(" "),s("td",{staticClass:"text-center"},[s("v-btn",{attrs:{href:t.file_url,color:"primary",outlined:"",rounded:"",small:"",target:"_blank"},domProps:{textContent:e._s("Preview")}})],1)])})),0)]},proxy:!0}])}):s("p",{staticClass:"my-3 grey--text darken-1 text-center",domProps:{textContent:e._s("No Applications Submitted")}})],1)],1)],1),e._v(" "),s("div",{staticClass:"my-2 mx-auto align-center align-content-center"},[s("v-btn",{staticClass:"d-block mx-auto",attrs:{disabled:!e.valid,loading:e.loading,color:"success"},on:{click:e.submit}},[e._v(" Save\n          ")])],1)],1),e._v(" "),s("small",[e._v("*indicates required field")])],1)],1)],1)}),[],!1,null,"eacdaa16",null);t.default=p.exports},241:function(e,t,s){"use strict";var r=s(33);s.n(r).a},242:function(e,t,s){(t=e.exports=s(11)(!1)).push([e.i,"@import url(https://cdn.quilljs.com/1.2.6/quill.snow.css);",""]),t.push([e.i,"\n",""])},33:function(e,t,s){var r=s(242);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s(12)(r,a);r.locals&&(e.exports=r.locals)},7:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var r={required:[function(e){return(e||"").length>0||"This field is required"}],min_20:[function(e){return(e||"").length>20||"The minimum required character is 20"}],min_50:[function(e){return(e||"").length>50||"The minimum required character is 20"}],min_100:[function(e){return(e||"").length>200||"The minimum required character is 200"}]}}}]);