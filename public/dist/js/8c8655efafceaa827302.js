(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{189:function(e,t,i){"use strict";i.r(t);var s=i(8),n=i(9),r=i(10),a=i.n(r);function l(){this.title="",this.image="",this.deadline="",this.file="",this.category="",this.description=""}var o=i(7),c=i(3),d=i(0),u=i(4),m={name:"Add Tender",components:{VueEditor:s.a},data:function(){return{valid:!1,modal:!1,tender:new l,rules:o.a,loading:!1,alert:{message:"",type:"",visible:!1},image_button_text:"Upload Image",file_button_text:"Upload File",editorSettings:{modules:{imageDrop:!0,imageResize:{}}},customModulesForEditor:[{alias:"imageDrop",module:n.a},{alias:"imageResize",module:a.a}]}},watch:{$route:"clear"},methods:{clear:function(){this.$refs.form.reset(),this.tender=new l,this.alert={message:"",type:"success",visible:!1}},submit:function(){var e=this;console.log(this.tender);var t=new FormData;Object.keys(this.tender).forEach((function(i){t.append(i,e.tender[i])}));var i=this;i.loading=!0,c.b.post("tender",t).then((function(e){i.alert={message:"Successfully Inserted Tender",type:"success",visible:!0},d.a.dispatch("setTenders",{page:1,size:10,category:""})}),(function(e){Object(u.a)(e),500===e.response.status?i.alert={message:"Error: Something went wrong at the server",type:"error",visible:!0}:i.alert={message:"Please fix issues before submitting",type:"error",visible:!0}})).finally((function(){i.loading=!1}))}},created:function(){d.a.dispatch("setTenderCategories")},computed:{categories:function(){return d.a.getters.getTenderCategories}}},v=(i(238),i(2)),f=Object(v.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"px-5 py-3 shadow-lg"},[i("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.alert.visible||!1,expression:"alert.visible || false"}],attrs:{type:e.alert.type,dismissible:""}},[e._v("\n    "+e._s(e.alert.message)+"\n  ")]),e._v(" "),i("v-card-title",[i("span",{staticClass:"headline"},[e._v("New Tender")])]),e._v(" "),i("v-card-text",[i("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"8"}},[i("v-text-field",{attrs:{rules:e.rules.required||e.rules.min_20,label:"Title*",required:""},model:{value:e.tender.title,callback:function(t){e.$set(e.tender,"title",t)},expression:"tender.title"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px","offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{rules:e.rules.required,value:e.tender.deadline?e.formatToDate(e.tender.deadline):null,label:"Deadline*","prepend-icon":"mdi-calendar",readonly:""}},s))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e._v(" "),i("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu2=!1}},model:{value:e.tender.deadline,callback:function(t){e.$set(e.tender,"deadline",t)},expression:"tender.deadline"}})],1)],1),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("vue-editor",{attrs:{customModules:e.customModulesForEditor,editorOptions:e.editorSettings,rules:e.rules.min_100},model:{value:e.tender.description,callback:function(t){e.$set(e.tender,"description",t)},expression:"tender.description"}})],1),e._v(" "),i("v-col",{attrs:{cols:"4"}},[[i("v-file-input",{attrs:{label:"Upload Image","show-size":""},model:{value:e.tender.image,callback:function(t){e.$set(e.tender,"image",t)},expression:"tender.image"}})]],2),e._v(" "),i("v-col",{attrs:{cols:"4"}},[[i("v-file-input",{attrs:{label:"Upload File","show-size":""},model:{value:e.tender.file,callback:function(t){e.$set(e.tender,"file",t)},expression:"tender.file"}})]],2),e._v(" "),i("v-col",{staticClass:"mx-auto",attrs:{cols:"4"}},[i("v-select",{attrs:{items:e.categories,rules:e.rules.required,label:"Select category"},model:{value:e.tender.category,callback:function(t){e.$set(e.tender,"category",t)},expression:"tender.category"}})],1)],1),e._v(" "),i("div",{staticClass:"my-2 mx-auto align-center align-content-center"},[i("v-btn",{staticClass:"d-block mx-auto",attrs:{disabled:!e.valid,loading:e.loading,color:"success"},on:{click:e.submit}},[e._v(" Save\n        ")])],1)],1),e._v(" "),i("small",[e._v("*indicates required field")])],1)],1)}),[],!1,null,"7356ac14",null);t.default=f.exports},238:function(e,t,i){"use strict";var s=i(32);i.n(s).a},239:function(e,t,i){(t=e.exports=i(11)(!1)).push([e.i,"@import url(https://cdn.quilljs.com/1.2.6/quill.snow.css);",""]),t.push([e.i,"\n",""])},32:function(e,t,i){var s=i(239);"string"==typeof s&&(s=[[e.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i(12)(s,n);s.locals&&(e.exports=s.locals)},7:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s={required:[function(e){return(e||"").length>0||"This field is required"}],min_20:[function(e){return(e||"").length>20||"The minimum required character is 20"}],min_50:[function(e){return(e||"").length>50||"The minimum required character is 20"}],min_100:[function(e){return(e||"").length>200||"The minimum required character is 200"}]}}}]);