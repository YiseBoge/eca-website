(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{11:function(e,s,t){"use strict";t.d(s,"a",(function(){return a}));var a={required:[function(e){return(e||"").length>0||"This field is required"}],min_20:[function(e){return(e||"").length>20||"The minimum required character is 20"}],min_50:[function(e){return(e||"").length>50||"The minimum required character is 20"}],min_100:[function(e){return(e||"").length>200||"The minimum required character is 200"}]}},264:function(e,s,t){"use strict";t.r(s);var a=t(3),o=t(1),n=t(8),r=t(5),i=t(11),c=t(12),l={name:"ChangePassword",data:function(){var e=this;return{msg:"",type:"",show1:!1,show2:!1,show3:!1,dialog:!1,showAlert:!1,password:{old_password:"",new_password:"",confirm_pass:""},rules:{v:i.a,match:[function(s){return s===e.password.new_password&&s.length>0||"Password doesn't match"}]}}},methods:{changePass:function(){var e=this;a.b.post("auth/change-password",this.password).then((function(s){e.type="success",e.msg="Changed successfully, You have to login again",setTimeout((function(){Object(c.b)()}),2e3)}),(function(s){e.type="error",e.msg="Unauthorized!!",Object(r.a)(error)})),this.showAlert=!0}}},d=t(2),u={name:"Profile",data:function(){return{user:o.a.getters.getUser,rules:i.a}},methods:{update:function(){a.b.post("user-profile/update",this.user).then((function(e){console.log(e),o.a.dispatch("setStateMessage","User info has changes successfully"),e.data.token!==o.a.getters.getApiToken&&(o.a.dispatch("setStateMessage","You have to re-login"),o.a.dispatch("setUser",e.data),setTimeout((function(){o.a.dispatch("resetUser"),n.a.push("/").then()}),2e3))}),(function(e){Object(r.a)(e),o.a.dispatch("setStateMessage","Something went wrong")}))}},computed:{sessionMessage:function(){return o.a.getters.getMessage}},mounted:function(){o.a.dispatch("resetMessage")},components:{"change-password":Object(d.a)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-dialog",{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(s){var a=s.on;return[t("v-btn",e._g({attrs:{color:"primary",dark:"",text:""}},a),[e._v("change password")])]}}]),model:{value:e.dialog,callback:function(s){e.dialog=s},expression:"dialog"}},[e._v(" "),t("v-card",[e.showAlert?t("v-alert",{attrs:{type:e.type,dismissible:""}},[e._v(" "+e._s(e.msg))]):e._e(),e._v(" "),t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Change Password")])]),e._v(" "),t("v-card-text",[t("small",[e._v("*indicates required field")]),e._v(" "),t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"Old password*",required:"",type:e.show1?"text":"password","append-icon":e.show1?"mdi-eye":"mdi-eye-off",counter:""},on:{"click:append":function(s){e.show1=!e.show1}},model:{value:e.password.old_password,callback:function(s){e.$set(e.password,"old_password",s)},expression:"password.old_password"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"New password",hint:"must be longer than 3 characters",rules:e.rules.v.required,type:e.show2?"text":"password","append-icon":e.show2?"mdi-eye":"mdi-eye-off",counter:""},on:{"click:append":function(s){e.show2=!e.show2}},model:{value:e.password.new_password,callback:function(s){e.$set(e.password,"new_password",s)},expression:"password.new_password"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"Confirm password",hint:"must be longer than 3 characters",rules:e.rules.match,type:e.show3?"text":"password","append-icon":e.show3?"mdi-eye":"mdi-eye-off",counter:""},on:{"click:append":function(s){e.show3=!e.show3}},model:{value:e.password.confirm_pass,callback:function(s){e.$set(e.password,"confirm_pass",s)},expression:"password.confirm_pass"}})],1)],1),e._v(" "),t("v-container",{staticClass:"text-center"},[t("v-btn",{attrs:{color:"blue text-center darken-1 mx-auto",text:""},on:{click:function(s){e.dialog=!1}}},[e._v("Close")]),e._v(" "),t("v-btn",{attrs:{color:"blue text-center darken-1 mx-auto",dark:""},on:{click:e.changePass}},[e._v("Save")])],1)],1)],1)],1)],1)}),[],!1,null,"bad74766",null).exports}},p=Object(d.a)(u,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-container",{staticClass:"col-md-6"},[t("v-card",{staticClass:"px-3 py-6 shadow-lg"},[e.sessionMessage?t("v-alert",{attrs:{type:"error",dismissible:""}},[e._v(e._s(e.sessionMessage))]):e._e(),e._v(" "),t("v-card-title",[e._v("\n      Edit Profile\n      "),t("v-spacer"),e._v(" "),t("change-password",{staticClass:"d-block mx-auto text-center"})],1),e._v(" "),t("v-form",{staticClass:"px-5 my-5"},[t("v-text-field",{attrs:{"append-icon":"mdi-account",label:"Name"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}}),e._v(" "),t("v-text-field",{attrs:{"append-icon":"mdi-email",label:"Email"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}}),e._v(" "),t("v-btn",{staticClass:"mx-auto d-block",attrs:{color:"blue",dark:""},on:{click:e.update}},[e._v("Update")]),e._v(" "),t("div",{staticClass:"mx-auto d-block"})],1)],1)],1)}),[],!1,null,"23c14602",null);s.default=p.exports}}]);