(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{11:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a={required:[function(e){return(e||"").length>0||"This field is required"}],min_20:[function(e){return(e||"").length>20||"The minimum required character is 20"}],min_50:[function(e){return(e||"").length>50||"The minimum required character is 20"}],min_100:[function(e){return(e||"").length>200||"The minimum required character is 200"}]}},177:function(e,t,i){var a=i(259);"string"==typeof a&&(a=[[e.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(8)(a,s);a.locals&&(e.exports=a.locals)},21:function(e,t,i){"use strict";function a(){this.title="",this.description="",this.start_date="",this.end_date="",this.location=""}i.d(t,"a",(function(){return a}))},258:function(e,t,i){"use strict";var a=i(177);i.n(a).a},259:function(e,t,i){(t=e.exports=i(7)(!1)).push([e.i,"@import url(https://cdn.quilljs.com/1.2.6/quill.snow.css);",""]),t.push([e.i,"\n",""])},274:function(e,t,i){"use strict";i.r(t);var a=i(13),s=i(14),l=i(15),n=i.n(l),o=i(11),c=i(3),r=i(1),u=i(5),d=i(6),m=(i(21),i(0),{name:"Edit Publication",components:{VueEditor:a.a},data:function(){return{valid:!1,modal:!1,rules:o.a,loading:!1,alert:{message:"",type:"",visible:!1},editorSettings:{modules:{imageDrop:!0,imageResize:{}}},customModulesForEditor:[{alias:"imageDrop",module:s.a},{alias:"imageResize",module:n.a}]}},watch:{$route:"clear"},methods:{clear:function(){this.loadData(),this.alert={message:"",type:"",visible:!1}},loadData:function(){r.a.dispatch("setSelectedPublication",{id:u.a.currentRoute.params.id})},submit:function(){var e=this;console.log(this.selectedPublication);var t=new FormData;Object.keys(this.selectedPublication).forEach((function(i){t.append(i,e.selectedPublication[i])})),t.append("_method","put");var i=this;i.loading=!0,c.b.post("publication/".concat(this.selectedPublication.id),t).then((function(e){i.alert={message:"Successfully Updated Publication",type:"success",visible:!0},r.a.dispatch("setPublications",{page:1,size:10,year:"All",category:""}),r.a.dispatch("setSelectedPublication",{id:u.a.currentRoute.params.id})}),(function(e){Object(d.a)(e),500===e.response.status?i.alert={message:"Error: Something went wrong at the server",type:"error",visible:!0}:i.alert={message:"Please fix issues before submitting",type:"error",visible:!0}})).finally((function(){i.loading=!1}))}},created:function(){r.a.dispatch("setSelectedPublication",{id:u.a.currentRoute.params.id}),r.a.dispatch("setPublicationCategories")},mounted:function(){this.publication=r.a.getters.getSelectedPublication},computed:{categories:function(){return r.a.getters.getPublicationCategories},selectedPublication:function(){return r.a.getters.getSelectedPublication},loadingPage:function(){return r.a.getters.getLoading}}}),v=(i(258),i(2)),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"px-5 py-3 shadow-lg"},[i("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.alert.visible||!1,expression:"alert.visible || false"}],attrs:{type:e.alert.type,dismissible:""}},[e._v("\n    "+e._s(e.alert.message)+"\n  ")]),e._v(" "),i("v-card-title",[i("span",{staticClass:"headline"},[e._v("Edit publication")])]),e._v(" "),i("v-fade-transition",{attrs:{"hide-on-leave":""}},[e.loadingPage?i("v-card-text",[i("v-skeleton-loader",{attrs:{type:"list-heading, list-item, list-item-three-line, list-item-three-line, list-item, actions"}})],1):i("v-card-text",[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-row",[i("v-col",{attrs:{cols:"10"}},[i("v-text-field",{attrs:{label:"Title*",required:"",rules:e.rules.required||e.rules.min_20},model:{value:e.selectedPublication.title,callback:function(t){e.$set(e.selectedPublication,"title",t)},expression:"selectedPublication.title"}})],1),e._v(" "),e.selectedPublication.file_url?i("v-col",{attrs:{cols:"2"}},[i("a",{staticClass:"btn btn-primary btn-sm text-white shadow-lg pr-4",attrs:{href:e.selectedPublication.file_url,target:"_blank"}},[i("v-icon",{attrs:{color:"white",left:"",small:""}},[e._v("mdi-download")]),e._v("\n              File\n            ")],1)]):e._e(),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("vue-editor",{attrs:{editorOptions:e.editorSettings,customModules:e.customModulesForEditor,rules:e.rules.min_100},model:{value:e.selectedPublication.description,callback:function(t){e.$set(e.selectedPublication,"description",t)},expression:"selectedPublication.description"}})],1),e._v(" "),i("v-col",{attrs:{cols:"4"}},[[i("v-file-input",{attrs:{"show-size":"",label:"Upload Image"},model:{value:e.selectedPublication.image,callback:function(t){e.$set(e.selectedPublication,"image",t)},expression:"selectedPublication.image"}})]],2),e._v(" "),i("v-col",{attrs:{cols:"4"}},[[i("v-file-input",{attrs:{"show-size":"",label:"Upload File"},model:{value:e.selectedPublication.file,callback:function(t){e.$set(e.selectedPublication,"file",t)},expression:"selectedPublication.file"}})]],2),e._v(" "),i("v-col",{staticClass:"mx-auto",attrs:{cols:"4"}},[i("v-select",{attrs:{label:"Select category",rules:e.rules.required,items:e.categories},model:{value:e.selectedPublication.category,callback:function(t){e.$set(e.selectedPublication,"category",t)},expression:"selectedPublication.category"}})],1)],1),e._v(" "),e.selectedPublication.image_url?i("div",{staticClass:"col-md-5 mx-auto"},[i("v-img",{attrs:{src:e.selectedPublication.image_url}})],1):e._e(),e._v(" "),i("div",{staticClass:"my-2 mx-auto align-center align-content-center"},[i("v-btn",{staticClass:"d-block mx-auto",attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:e.submit}},[e._v(" Save")])],1)],1),e._v(" "),i("small",[e._v("*indicates required field")])],1)],1)],1)}),[],!1,null,"3d37d020",null);t.default=b.exports}}]);